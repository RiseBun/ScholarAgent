# 多数据源分层搜索：DBLP + arXiv + OpenAlex 三源融合

## 1. 架构设计

### 1.1 扩展 PaperFetcher 类
- 添加 `_search_dblp` 方法，支持通过 DBLP API 搜索会议论文
- 添加 `_parse_dblp_entry` 方法，解析 DBLP 返回的论文信息
- 添加 `_fetch_dblp_async` 异步包装方法
- 修改 `search_papers_async` 方法，实现 DBLP + arXiv + OpenAlex 三源融合策略

### 1.2 数据源优先级
- **主要数据源**：DBLP（用于会议过滤，Venue 准确度最高）
- **补充数据源**：arXiv（提供最新预印本）
- **辅助数据源**：OpenAlex（提供引用信息和元数据）

## 2. 功能实现

### 2.1 DBLP 搜索功能
- 支持通过 DBLP API 搜索会议论文
- 实现关键词、年份、会议过滤等功能
- 支持 `venue:CVPR:` 等高级搜索语法
- 提供错误处理和降级机制

### 2.2 分层搜索策略
- **场景 1：用户指定了会议**
  1. DBLP 精确搜索 → 获取该会议的确定论文
  2. arXiv 模糊搜索 → 获取最新的相关预印本
  3. OpenAlex 补充 → 为 DBLP 结果补充引用数

- **场景 2：用户未指定会议**
  1. arXiv 搜索 → 获取最新论文
  2. OpenAlex 搜索 → 获取已发表论文+引用数
  3. DBLP 补充 → 为结果补充准确的 venue 信息

### 2.3 智能融合逻辑
- 按 title 去重
- DBLP 提供 venue 信息（最高优先级）
- OpenAlex 补充引用数和元数据
- arXiv 补充 PDF 链接和最新预印本

### 2.4 UI 集成
- 在 Streamlit 应用中添加数据源选择选项
- 添加会议过滤功能
- 显示论文来源和融合信息

## 3. 技术细节

### 3.1 DBLP API 集成
```python
def _search_dblp(self, query, limit=10, start_year=2024, end_year=2026, venue_filter="", offset=0):
    """Search papers using DBLP API"""
    # 实现 DBLP API 调用逻辑
    # 解析返回结果
    # 过滤和标准化论文信息
    # 返回标准化的论文列表
```

### 3.2 错误处理与降级
- 当 DBLP 不可用时，自动降级到 arXiv + OpenAlex
- 当 arXiv 不可用时，使用 DBLP + OpenAlex
- 当 OpenAlex 不可用时，使用 DBLP + arXiv

### 3.3 性能优化
- 使用异步编程，与其他数据源并发搜索
- 合理设置搜索参数，减少 API 调用次数
- 缓存搜索结果，避免重复请求

## 4. 预期效果

### 4.1 搜索质量提升
- 更好地检索 CVPR、ICLR 等顶会论文
- 提高论文的相关性和准确性
- 增加被引数等重要信息

### 4.2 功能增强
- 支持更多高级搜索语法
- 提供更全面的论文信息
- 增强顶会检测和 venue 识别

### 4.3 用户体验改进
- 简化搜索流程，减少用户手动验证
- 提供更准确的搜索结果
- 增加数据源融合的透明度

## 5. 实施步骤

1. **添加 DBLP 搜索方法**：实现 `_search_dblp` 和相关方法
2. **扩展混合搜索策略**：修改 `search_papers_async` 方法，实现分层搜索逻辑
3. **优化智能融合**：更新 `_smart_merge` 方法，支持 DBLP 优先级
4. **测试与优化**：测试搜索结果质量，优化 API 调用和错误处理
5. **文档更新**：更新代码注释和用户文档

通过实现 DBLP + arXiv + OpenAlex 三源融合的分层搜索策略，ScholarAgent 将能够更全面、更准确地检索学术论文，特别是顶会论文，从而为用户提供更好的学术搜索体验。